[language-server]
dprint-lsp = { command = "./node_modules/.bin/dprint", args = ["lsp"]}

[language-server.efm]
command = "efm-langserver"

[language-server.terraform-ls]
command = "terraform-ls"
args = ["serve"]

[[language]]
name = "typescript"
# formatter is a good fallback if efm-langserver feels too complex
# formatter = { command = './node_modules/.bin/prettier', args = ["--parser", "typescript"] }
language-servers = [
  { name = "efm", only-features = [ "format" ] },
  { name = "typescript-language-server", except-features = [ "format" ] }
]
auto-format = true

[[language]]
name = "tsx"
# formatter = { command = './node_modules/.bin/prettier', args = ["--parser", "typescript"] }
language-servers = [
  { name = "efm", only-features = [ "format" ] },
  { name = "typescript-language-server", except-features = [ "format" ] }
]
auto-format = true

[[language]]
name = "javascript"
# formatter = { command = './node_modules/.bin/prettier', args = ["--parser", "typescript"] }
language-servers = [
  { name = "efm", only-features = [ "format" ] },
  { name = "typescript-language-server", except-features = [ "format" ] }
]
auto-format = true

[[language]]
name = "jsx"
# formatter = { command = './node_modules/.bin/prettier', args = ["--parser", "typescript"] }
language-servers = [
  { name = "efm", only-features = [ "format" ] },
  { name = "typescript-language-server", except-features = [ "format" ] }
]
auto-format = true

[[language]]
name = "json"
# formatter = { command = './node_modules/.bin/prettier', args = ["--parser", "typescript"] }
language-servers = [
  { name = "efm", only-features = [ "format" ] },
  { name = "typescript-language-server", except-features = [ "format" ] }
]
auto-format = true

[[language]]
name = "css"
# formatter = { command = './node_modules/.bin/prettier', args = ["--parser", "typescript"] }
language-servers = [
  { name = "efm", only-features = [ "format" ] },
  { name = "typescript-language-server", except-features = [ "format" ] }
]
auto-format = true

[[language]]
name = "html"
# formatter = { command = './node_modules/.bin/prettier', args = ["--parser", "typescript"] }
language-servers = [
  { name = "efm", only-features = [ "format" ] },
  { name = "typescript-language-server", except-features = [ "format" ] }
]
auto-format = true

[[language]]
name = "markdown"
text-width = 120

[[language]]
name = "rust"
language-servers = [ { name = "rust-analyzer" } ]

[[language]]
name = "hcl"
language-servers = [ "terraform-ls" ]
language-id = "terraform"

[[language]]
name = "tfvars"
language-servers = [ "terraform-ls" ]
language-id = "terraform-vars"

[[language]]
name = "toml"
formatter = { command = "taplo", args = ["fmt", "-"] }

[[language]]
name = "sql"
indent = { tab-width = 2, unit = " " }
